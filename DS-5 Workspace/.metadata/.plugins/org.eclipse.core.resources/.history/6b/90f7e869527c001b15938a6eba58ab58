/*
 * bluetooth.c
 *
 *  Created on: Feb 28, 2021
 *      Author: zoeyli
 */
#define _BSD_SOURCE
#include <stdio.h>
#include <string.h>
#include <time.h>

#include "serial.h"
//#define HALF_SEC 500
//
//
//void sleep(long msec){
//	struct timespec ts;
//	int res;
//	ts.tv_sec = msec / 1000;
//	ts.tv_nsec = (msec % 1000) * 1000000;
//	res = nanosleep(&ts, &ts);
//}

void BT_setName(char *name, volatile unsigned char* LineStatusReg, volatile unsigned char* TransmitterFifo) {

	//sleep(HALF_SEC);
	sendMessage("$$$", LineStatusReg, TransmitterFifo);
	//sleep(HALF_SEC);

	// send the command to change the name
	char command[25] = "SN,";
	strcat(command, name);
	strcat(command, "\r\n");

	sendMessage(command,LineStatusReg, TransmitterFifo);

}

void BT_setPassword(char *password,  volatile unsigned char* LineStatusReg, volatile unsigned char* TransmitterFifo) {

	//sleep(HALF_SEC);
	sendMessage("$$$",LineStatusReg, TransmitterFifo);
	//sleep(HALF_SEC);


	// send the command to change the password
	char command[25] = "SP,";
	strcat(command, password);
	strcat(command, "\r\n");

	sendMessage(command,LineStatusReg, TransmitterFifo);

}

